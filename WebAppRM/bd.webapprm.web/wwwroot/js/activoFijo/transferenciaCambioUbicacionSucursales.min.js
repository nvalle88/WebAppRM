function deshabilitarCamposFormulario(){$("#IdSucursalOrigen").prop("disabled","disabled"),$("#IdSucursalDestino").prop("disabled","disabled"),$("#IdEmpleadoEntrega").prop("disabled","disabled"),$("#IdEmpleadoRecibe").prop("disabled","disabled")}function adicionarArrRecepcionActivoFijoDetalle(){var e=idsRecepcionActivoFijoDetalle.split(",");$.each(e,function(e,a){""!=a&&null!=a&&adicionarRecepcionActivoFijoDetalleSeleccionado(a,!0)})}function eventoSucursalOrigen(){$("#IdSucursalOrigen").on("change",function(e){partialViewEmpleadosPorSucursal("divEmpleadosSucursalOrigen","IdSucursalOrigen","_EmpleadosTransferenciaSucursalOrigen")})}function eventoSucursalDestino(){$("#IdSucursalDestino").on("change",function(e){partialViewEmpleadosPorSucursal("divEmpleadosSucursalDestino","IdSucursalDestino","_EmpleadosTransferenciaSucursalDestino")})}function partialViewEmpleadosPorSucursal(a,e,i){mostrarLoadingPanel("checkout-form","Cargando empleados..."),$.ajax({url:urlEmpleadoTransferenciaResult,method:"POST",data:{idSucursal:$("#"+e).val(),namePartialView:i},success:function(e){$("#"+a).html(e),Init_Select2()},complete:function(e){"divEmpleadosSucursalOrigen"==a?partialViewActivosFijosPorCustodio():$("#IdSucursalOrigen").val()==$("#IdSucursalDestino").val()?copiarSucursales():$("#checkout-form").waitMe("hide"),eventoCustodioEntrega()}})}function eventoCustodioEntrega(){$("#IdEmpleadoEntrega").on("change",function(e){partialViewActivosFijosPorCustodio()})}function partialViewActivosFijosPorCustodio(){mostrarLoadingPanel("checkout-form","Cargando listado de activos fijos..."),$.ajax({url:urlListadoActivosFijosCustodioResult,method:"POST",data:{idEmpleado:$("#IdEmpleadoEntrega").val()},success:function(e){$("#divActivosFijosATransferir").html(e),initDataTableFiltrado("tableDetallesActivoFijoBajas",[14,16,17,18,19,20,21,22]),$("#tableDetallesActivoFijoBajas").DataTable().page.len(-1).draw(),arrRecepcionActivoFijoDetalleSeleccionado=[]},complete:function(e){$("#IdSucursalOrigen").val()==$("#IdSucursalDestino").val()?copiarSucursales():$("#checkout-form").waitMe("hide")}})}function callBackFunctionSeleccionBaja(e,a){a?adicionarRecepcionActivoFijoDetalleSeleccionado(e,a):eliminarRecepcionActivoFijoDetalleSeleccionado(e)}function eventoGuardar(){$("#btn-guardar").on("click",function(e){var a=$("#checkout-form"),i=!0;if(0==arrRecepcionActivoFijoDetalleSeleccionado.length&&(mostrarNotificacion("Error","Tiene que seleccionar al menos un Activo Fijo."),i=!1),a.valid()||(i=!1),i){for(var o=[],l=0;l<arrRecepcionActivoFijoDetalleSeleccionado.length;l++)o.push(arrRecepcionActivoFijoDetalleSeleccionado[l].idRecepcionActivoFijoDetalle);var c=o.join(",").toString();$("#idsRecepcionActivoFijoDetalle").val(c),$("#btn-guardar").prop("type","submit")}})}function copiarSucursales(){$("#IdSucursalDestino").html(""),$("#IdSucursalDestino").select2("data",null);for(var e=$("#IdSucursalOrigen").val(),a=document.getElementById("IdSucursalOrigen").children,i=0;i<a.length;i++){var o=a[i].value;if(o!=e){var l=new Option(a[i].text,o,!1,!1);$("#IdSucursalDestino").append(l).trigger("change")}}partialViewEmpleadosPorSucursal("divEmpleadosSucursalDestino","IdSucursalDestino","_EmpleadosTransferenciaSucursalDestino")}$(document).ready(function(){Init_Select2(),Init_DatetimePicker("FechaTransferencia",!0),inicializarDetallesActivoSeleccion(),initDataTableFiltrado("tableDetallesActivoFijoBajas",idEditar?[13,15,16,17,18,19,20,21]:[14,16,17,18,19,20,21,22]),$("#tableDetallesActivoFijoBajas").DataTable().page.len(-1).draw(),eventoCustodioEntrega(),eventoGuardar(),adicionarArrRecepcionActivoFijoDetalle(),eventoSucursalOrigen(),eventoSucursalDestino(),$("#IdSucursalOrigen").prop("disabled","disabled"),idEditar&&deshabilitarCamposFormulario(),isVistaDetalles&&(deshabilitarCamposFormulario(),$("#FechaTransferencia").prop("disabled","disabled"),$("#Observaciones").prop("disabled","disabled"),$("#IdEmpleadoResponsableEnvio").prop("disabled","disabled"),$("#IdEmpleadoResponsableRecibo").prop("disabled","disabled"))});