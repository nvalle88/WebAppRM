var arrRecepcionActivoFijoDetalleComponentes=Array(),idFilaDatoEspecificoActual=-1;function addComponenteToArray(o,e,n){arrRecepcionActivoFijoDetalleComponentes.push({idFilaDatoEspecifico:o,idRecepcionActivoDetalleOrigen:e,arrIdsComponentes:n})}function cargarFormularioComponentesDatosEspecificos(o){mostrarLoadingPanel("modalContentComponente","Cargando componentes, por favor espere..."),$("#btnAdicionarComponentes").data("idFila",o),idFilaDatoEspecificoActual=o,$.ajax({url:urlModalComponentesResult,method:"POST",data:{componentesActivo:obtenerRecepcionActivoFijoDetalleComponente(),idsComponentesExcluir:obtenerIdsComponentesExcluir(o)},success:function(o){$("#modalBodyComponente").html(o),initDataTableFiltrado("tableDetallesActivoFijo",[])},error:function(o){mostrarNotificacion("Error","Ocurrió un error al cargar el formulario.")},complete:function(o){$("#modalContentComponente").waitMe("hide")}})}function cargarListadoActivosFijosParaComponentes(){mostrarLoadingPanel("modalContentComponenteActivoFijo","Cargando listado de activos fijos, por favor espere...");var o=$("#btnAdicionarComponentes").data("idFila");$.ajax({url:urlComponentesActivosFijos,method:"POST",data:{componentesActivo:obtenerRecepcionActivoFijoDetalleComponente(),idsComponentesExcluir:obtenerIdsComponentesExcluir(o)},success:function(o){$("#modalBodyComponenteActivoFijo").html(o),initDataTableFiltrado("tableDetallesActivoFijoComponentes",[]),eventoCheckboxDetallesActivoFijo()},error:function(o){mostrarNotificacion("Error","Ocurrió un error al cargar el formulario.")},complete:function(o){$("#modalContentComponenteActivoFijo").waitMe("hide")}})}function obtenerIdsComponentesExcluir(o){for(var e=Array(),n=0;n<arrRecepcionActivoFijoDetalleComponentes.length;n++)if(arrRecepcionActivoFijoDetalleComponentes[n].idFilaDatoEspecifico!=o)for(var i=arrRecepcionActivoFijoDetalleComponentes[n].arrIdsComponentes,t=0;t<i.length;t++)e.push(i[t]);return e}function eliminarIdComponente(o,e){for(var n=0;n<e.arrIdsComponentes.length;n++)if(e.arrIdsComponentes[n]==o)return void e.arrIdsComponentes.splice(n,1)}function eliminarComponente(o){for(var e=0;e<arrRecepcionActivoFijoDetalleComponentes.length;e++)if(arrRecepcionActivoFijoDetalleComponentes[e].idFilaDatoEspecifico==o)return void arrRecepcionActivoFijoDetalleComponentes.splice(e,1)}function obtenerRecepcionActivoFijoDetalleComponente(){for(var o=0;o<arrRecepcionActivoFijoDetalleComponentes.length;o++)if(arrRecepcionActivoFijoDetalleComponentes[o].idFilaDatoEspecifico==idFilaDatoEspecificoActual)return arrRecepcionActivoFijoDetalleComponentes[o];return null}function callBackFunctionSeleccionComponente(o,e){e?(addRowDetallesActivosFijos("tableDetallesActivoFijo","tableDetallesActivoFijoComponentes",o,["Serie","NumeroChasis","NumeroMotor","Placa","NumeroClaveCatastral","Sucursal","Bodega","Empleado","Proveedor","MotivoRecepcion","FechaRecepcion","OrdenCompra","FondoFinanciamiento","FechaAlta","NumeroFactura","<div id='divEliminarComponente_"+o+"' class='btnEliminarComponentes' style='display:inline;'><a href='javascript: void(0);' id='btnEliminarComponente_"+o+"' onclick=abrirVentanaConfirmacion('btnEliminarComponente_"+o+"') data-funcioncallback=callBackEliminarComponente('"+o+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Componente... ?'>Eliminar</a></div>"],!0),obtenerRecepcionActivoFijoDetalleComponente().arrIdsComponentes.push(o)):callBackEliminarComponente(o);putValuesComponentesenCampoHidden()}function callBackEliminarComponente(o){deleteRowDetallesActivosFijos("tableDetallesActivoFijo",o),eliminarIdComponente(o,obtenerRecepcionActivoFijoDetalleComponente()),putValuesComponentesenCampoHidden()}function putValuesComponentesenCampoHidden(){var o=$("#hComponentes_"+idFilaDatoEspecificoActual),e=obtenerRecepcionActivoFijoDetalleComponente().arrIdsComponentes.join(",");o.val(e)}jQuery(document).ready(function(){$.each($(".btnComponentesDatosEspecificos"),function(o,e){var n=$(e),i=n.data("idfila");addComponenteToArray(i,n.data("idorigen"),$("#hComponentes_"+i).val().split(","))})});