function eventoLectorCodigoBarras(){Init_DeteccionLectorCodigoBarras("CodigoActivoFijo_Codigosecuencial",function(o,a){eventoScannerCodigosecuencial(o,a)})}function eventoScannerCodigosecuencial(a,o){mostrarLoadingPanel("checkout-form","Cargando datos de activo fijo..."),limpiarCampos(),$("#CodigoActivoFijo_Codigosecuencial").val(a),$.ajax({url:urlDatosInventarioActivoFijo,method:"POST",data:{codigoSecuencial:a},success:function(o){$("#divDatosInventarioActivoFijo").html(o),existeActivoFijoEnTabla()?(mostrarNotificacion("Error","El activo fijo con el código secuencial "+a+" ya se encuentra en el listado."),limpiarCampos()):(HabilitarCheckConstatadoBtnRegistrar(!0),eventoRegistrar())},error:function(o){mostrarNotificacion("Error",o.responseText),limpiarCampos()},complete:function(o){eventoLectorCodigoBarras(),$("#checkout-form").waitMe("hide")}})}function existeActivoFijoEnTabla(){var o=$("#IdRecepcionActivoFijoDetalle").val();return null!=obtenerRecepcionActivoFijoDetalleSeleccionado(o)}function HabilitarCheckConstatadoBtnRegistrar(o){o?($("#chkConstatado").prop("disabled",""),$("#btn-registrar").prop("disabled","")):($("#chkConstatado").prop("disabled","disabled"),$("#btn-registrar").prop("disabled","disabled"))}function adicionarArrRecepcionActivoFijoDetalle(){var o=idsRecepcionActivoFijoDetalle.split(",");$.each(o,function(o,a){if(""!=a&&null!=a){var e=a.split("_");adicionarRecepcionActivoFijoDetalleSeleccionado(e[0],"true"===e[1].toLowerCase())}})}function callBackFunctionSeleccionBaja(o,a){var e=obtenerRecepcionActivoFijoDetalleSeleccionado(o);e.seleccionado=!!a}function callBackFunctionSeleccionConstatado(o,a){adicionarRecepcionActivoFijoDetalleSeleccionado(o,a);var e='<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+o+'" name="hIdRecepcionActivoFijoDetalle_'+o+'" value="'+o+'" />',i="<div id='divEliminarDatosEspecificos_"+o+"' class='btnEliminarDatosEspecificos' style='display:inline;'><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+o+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+o+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+o+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>";addRowDetallesActivosFijosPorArray("tableDetallesActivoFijoBajas",o,["",thClassName.codigoSecuencial,thClassName.tipoActivoFijo,thClassName.claseActivoFijo,thClassName.subClaseActivoFijo,thClassName.nombreActivoFijo,thClassName.marca,thClassName.modelo,thClassName.serie,thClassName.numeroChasis,thClassName.numeroMotor,thClassName.placa,thClassName.numeroClaveCatastral,thClassName.sucursal,thClassName.dependencia,thClassName.bodega,thClassName.empleado,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,thClassName.fechaAlta,thClassName.motivoAlta,thClassName.numeroFactura,""],[addRowCheckBox(o,a,"callBackFunctionSeleccionBaja",!1,"","",!1),$("#CodigoActivoFijo_Codigosecuencial").val(),$("#ActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_TipoActivoFijo_Nombre").val(),$("#ActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_Nombre").val(),$("#ActivoFijo_SubClaseActivoFijo_Nombre").val(),$("#ActivoFijo_Nombre").val(),$("#ActivoFijo_Modelo_Marca_Nombre").val(),$("#ActivoFijo_Modelo_Nombre").val(),agregarDashValorEmpty($("#Serie").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_NumeroChasis").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_NumeroMotor").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_Placa").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleEdificio_NumeroClaveCatastral").val()),$("#SucursalActual_Nombre").val(),agregarDashValorEmpty($("#UbicacionActivoFijoActual_Empleado_Dependencia_Nombre").val()),agregarDashValorEmpty($("#UbicacionActivoFijoActual_Bodega_Nombre").val()),$("#UbicacionActivoFijoActual_IdEmpleado").val(),$("#RecepcionActivoFijo_IdProveedor").val(),$("#RecepcionActivoFijo_MotivoAlta_Descripcion").val(),$("#RecepcionActivoFijo_FechaRecepcion").val(),$("#RecepcionActivoFijo_OrdenCompra").val(),$("#RecepcionActivoFijo_FondoFinanciamiento_Nombre").val(),agregarDashValorEmpty($("#AltaActivoFijoActual_FechaAlta").val()),agregarDashValorEmpty($("#AltaActivoFijoActual_FacturaActivoFijo_NumeroFactura").val()),e+i],!0)}function callBackFunctionEliminarDatoEspecifico(o){deleteRowDetallesActivosFijos("tableDetallesActivoFijoBajas",o),eliminarRecepcionActivoFijoDetalleSeleccionado(o),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoRegistrar(){$("#btn-registrar").on("click",function(o){var a=$("#IdRecepcionActivoFijoDetalle").val();arrRecepcionActivoFijoDetalleTodos.push(a),callBackFunctionSeleccionConstatado(a,$("#chkConstatado").prop("checked")),limpiarCampos(),tryMarcarCheckBoxTodos()})}function limpiarCampos(){$("#CodigoActivoFijo_Codigosecuencial").val(""),$("#ActivoFijo_Nombre").val(""),$("#SucursalActual_Nombre").val(""),$("#UbicacionActivoFijoActual_IdEmpleado").val(""),$("#chkConstatado").prop("checked",""),HabilitarCheckConstatadoBtnRegistrar(!1),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoGuardar(){$("#btn-guardar").on("click",function(o){var a=$("#checkout-form"),e=!0;if(0==arrRecepcionActivoFijoDetalleSeleccionado.length&&(mostrarNotificacion("Error","Tiene que existir al menos un Activo Fijo en el Inventario."),e=!1),a.valid()||(e=!1),e){for(var i=[],c=0;c<arrRecepcionActivoFijoDetalleSeleccionado.length;c++)i.push(arrRecepcionActivoFijoDetalleSeleccionado[c].idRecepcionActivoFijoDetalle+"_"+arrRecepcionActivoFijoDetalleSeleccionado[c].seleccionado);var t=i.join(",").toString();$("#idsRecepcionActivoFijoDetalleSeleccionado").val(t),$("#btn-guardar").prop("type","submit")}})}jQuery(document).ready(function(o){Init_DatetimePicker("FechaCorteInventario",!0),Init_DatetimePicker("FechaInforme",!0),Init_Select2(),adicionarArrRecepcionActivoFijoDetalle(),initDataTableFiltrado("tableDetallesActivoFijoBajas",[thClassName.bodega,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,thClassName.fechaAlta,thClassName.numeroFactura],function(){var o=$("#tableDetallesActivoFijoBajas").dataTable().api(),a=o.rows({page:"current"}).nodes(),e=null,i=[];crearGrupo(o,a,e,i,21,"Fondo de financiamiento",0,25),crearGrupo(o,a,e,i,3,"Clase de activo fijo",6,25),crearGrupo(o,a,e,i,4,"Subclase de activo fijo",12,25)}),$("#tableDetallesActivoFijoBajas").DataTable().page.len(-1).draw(),eventoGuardar(),eventoLectorCodigoBarras(),inicializarIdsArrRecepcionActivoFijoDetalleTodos(),isVistaDetalles&&($("#NumeroInforme").prop("disabled","disabled"),$("#FechaCorteInventario").prop("disabled","disabled"),$("#FechaInforme").prop("disabled","disabled"),$("#IdEstado").prop("disabled","disabled"))});