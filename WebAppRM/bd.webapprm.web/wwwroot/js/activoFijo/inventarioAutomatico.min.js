function eventoLectorCodigoBarras(){Init_DeteccionLectorCodigoBarras("CodigoActivoFijo_Codigosecuencial",function(o,i){eventoScannerCodigosecuencial(o,i)})}function eventoScannerCodigosecuencial(i,o){mostrarLoadingPanel("checkout-form","Cargando datos de activo fijo..."),limpiarCampos(),$("#CodigoActivoFijo_Codigosecuencial").val(i),$.ajax({url:urlDatosInventarioActivoFijo,method:"POST",data:{codigoSecuencial:i},success:function(o){$("#divDatosInventarioActivoFijo").html(o),existeActivoFijoEnTabla()?(mostrarNotificacion("Error","El activo fijo con el código secuencial "+i+" ya se encuentra en el listado."),limpiarCampos()):(HabilitarCheckConstatadoBtnRegistrar(!0),eventoRegistrar())},error:function(o){mostrarNotificacion("Error",o.responseText),limpiarCampos()},complete:function(o){eventoLectorCodigoBarras(),$("#checkout-form").waitMe("hide")}})}function existeActivoFijoEnTabla(){var o=$("#IdRecepcionActivoFijoDetalle").val();return null!=obtenerRecepcionActivoFijoDetalleSeleccionado(o)}function HabilitarCheckConstatadoBtnRegistrar(o){o?($("#chkConstatado").prop("disabled",""),$("#btn-registrar").prop("disabled","")):($("#chkConstatado").prop("disabled","disabled"),$("#btn-registrar").prop("disabled","disabled"))}function adicionarArrRecepcionActivoFijoDetalle(){var o=idsRecepcionActivoFijoDetalle.split(",");$.each(o,function(o,i){if(""!=i&&null!=i){var a=i.split("_");adicionarRecepcionActivoFijoDetalleSeleccionado(a[0],"true"===a[1].toLowerCase())}})}function callBackFunctionSeleccionBaja(o,i){var a=obtenerRecepcionActivoFijoDetalleSeleccionado(o);a.seleccionado=!!i}function callBackFunctionSeleccionConstatado(o,i){adicionarRecepcionActivoFijoDetalleSeleccionado(o,i);var a='<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+o+'" name="hIdRecepcionActivoFijoDetalle_'+o+'" value="'+o+'" />',e="<div id='divEliminarDatosEspecificos_"+o+"' class='btnEliminarDatosEspecificos' style='display:inline;'><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+o+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+o+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+o+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>";addRowDetallesActivosFijosPorArray("tableDetallesActivoFijoBajas",o,["","Codigosecuencial","TipoActivoFijo","ClaseActivoFijo","SubclaseActivoFijo","NombreActivoFijo","Marca","Modelo","Serie","NumeroChasis","NumeroMotor","Placa","NumeroClaveCatastral","Sucursal","Bodega","Empleado","Proveedor","MotivoAlta","FechaRecepcion","OrdenCompra","FondoFinanciamiento","FechaAlta","MotivoAlta","NumeroFactura",""],[addRowCheckBox(o,i,"callBackFunctionSeleccionBaja",!1,"","",!1),$("#CodigoActivoFijo_Codigosecuencial").val(),$("#ActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_TipoActivoFijo_Nombre").val(),$("#ActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_Nombre").val(),$("#ActivoFijo_SubClaseActivoFijo_Nombre").val(),$("#ActivoFijo_Nombre").val(),$("#ActivoFijo_Modelo_Marca_Nombre").val(),$("#ActivoFijo_Modelo_Nombre").val(),agregarDashValorEmpty($("#Serie").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_NumeroChasis").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_NumeroMotor").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleVehiculo_Placa").val()),agregarDashValorEmpty($("#RecepcionActivoFijoDetalleEdificio_NumeroClaveCatastral").val()),$("#SucursalActual_Nombre").val(),agregarDashValorEmpty($("#UbicacionActivoFijoActual_Bodega_Nombre").val()),$("#UbicacionActivoFijoActual_IdEmpleado").val(),$("#RecepcionActivoFijo_IdProveedor").val(),$("#RecepcionActivoFijo_MotivoAlta_Descripcion").val(),$("#RecepcionActivoFijo_FechaRecepcion").val(),$("#RecepcionActivoFijo_OrdenCompra").val(),$("#RecepcionActivoFijo_FondoFinanciamiento_Nombre").val(),$("#AltaActivoFijoActual_FechaAlta").val(),$("#AltaActivoFijoActual_MotivoAlta_Descripcion").val(),agregarDashValorEmpty($("#AltaActivoFijoActual_FacturaActivoFijo_NumeroFactura").val()),a+e],!0)}function callBackFunctionEliminarDatoEspecifico(o){deleteRowDetallesActivosFijos("tableDetallesActivoFijoBajas",o),eliminarRecepcionActivoFijoDetalleSeleccionado(o),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoRegistrar(){$("#btn-registrar").on("click",function(o){var i=$("#IdRecepcionActivoFijoDetalle").val();arrRecepcionActivoFijoDetalleTodos.push(i),callBackFunctionSeleccionConstatado(i,$("#chkConstatado").prop("checked")),limpiarCampos(),tryMarcarCheckBoxTodos()})}function limpiarCampos(){$("#CodigoActivoFijo_Codigosecuencial").val(""),$("#ActivoFijo_Nombre").val(""),$("#SucursalActual_Nombre").val(""),$("#UbicacionActivoFijoActual_IdEmpleado").val(""),$("#chkConstatado").prop("checked",""),HabilitarCheckConstatadoBtnRegistrar(!1),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoGuardar(){$("#btn-guardar").on("click",function(o){var i=$("#checkout-form"),a=!0;if(0==arrRecepcionActivoFijoDetalleSeleccionado.length&&(mostrarNotificacion("Error","Tiene que existir al menos un Activo Fijo en el Inventario."),a=!1),i.valid()||(a=!1),a){for(var e=[],c=0;c<arrRecepcionActivoFijoDetalleSeleccionado.length;c++)e.push(arrRecepcionActivoFijoDetalleSeleccionado[c].idRecepcionActivoFijoDetalle+"_"+arrRecepcionActivoFijoDetalleSeleccionado[c].seleccionado);var t=e.join(",").toString();$("#idsRecepcionActivoFijoDetalleSeleccionado").val(t),$("#btn-guardar").prop("type","submit")}})}jQuery(document).ready(function(o){Init_DatetimePicker("FechaCorteInventario",!0),Init_DatetimePicker("FechaInforme",!0),Init_Select2(),adicionarArrRecepcionActivoFijoDetalle(),initDataTableFiltrado("tableDetallesActivoFijoBajas",[thClassName.bodega,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,thClassName.fechaAlta,thClassName.numeroFactura],function(){var o=$("#tableDetallesActivoFijoBajas").dataTable().api(),i=o.rows({page:"current"}).nodes(),a=null,e=[];crearGrupo(o,i,a,e,18,"Fondo de financiamiento",0,23),crearGrupo(o,i,a,e,3,"Clase de activo fijo",6,23),crearGrupo(o,i,a,e,4,"Subclase de activo fijo",12,23)}),$("#tableDetallesActivoFijoBajas").DataTable().page.len(-1).draw(),eventoGuardar(),eventoLectorCodigoBarras(),inicializarIdsArrRecepcionActivoFijoDetalleTodos(),isVistaDetalles&&($("#NumeroInforme").prop("disabled","disabled"),$("#FechaCorteInventario").prop("disabled","disabled"),$("#FechaInforme").prop("disabled","disabled"),$("#IdEstado").prop("disabled","disabled"))});