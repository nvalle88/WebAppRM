function eventoLectorCodigoBarras(){Init_DeteccionLectorCodigoBarras("CodigoActivoFijo_Codigosecuencial",function(a,o){eventoScannerCodigosecuencial(a,o)})}function eventoScannerCodigosecuencial(a,o){mostrarLoadingPanel("checkout-form","Cargando datos de activo fijo..."),$("#CodigoActivoFijo_Codigosecuencial").val(a);for(var e=[],i=0;i<arrRecepcionActivoFijoDetalleSeleccionado.length;i++)e.push(arrRecepcionActivoFijoDetalleSeleccionado[i].idRecepcionActivoFijoDetalle);$.ajax({url:urlDatosInventarioActivoFijo,method:"POST",data:{codigoSecuencial:a,listadoRafdSeleccionados:e},success:function(a){Init_BootBox("Activos fijos a constatar",a,"large",null,null,function(){limpiarCampos()}),ajustarBootboxPorCiento(80)},error:function(a){mostrarNotificacion("Error",a.responseText),limpiarCampos()},complete:function(a){eventoLectorCodigoBarras(),initDataTableFiltrado("tableDetallesDatosInventario",[],null,{mostrarTodos:!0,ocultarTodos:!0},!0),$("#checkout-form").waitMe("hide")}})}function adicionarArrRecepcionActivoFijoDetalle(){var a=idsRecepcionActivoFijoDetalle.split(",");$.each(a,function(a,o){if(""!=o&&null!=o){var e=o.split("_");adicionarRecepcionActivoFijoDetalleSeleccionado(e[0],"true"===e[1].toLowerCase())}})}function callBackFunctionSeleccionBaja(a,o){var e=obtenerRecepcionActivoFijoDetalleSeleccionado(a);e.seleccionado=!!o}function callBackFunctionSeleccionConstatado(a,o,e){adicionarRecepcionActivoFijoDetalleSeleccionado(a,e);var i='<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+a+'" name="hIdRecepcionActivoFijoDetalle_'+a+'" value="'+a+'" />',c="<div id='divEliminarDatosEspecificos_"+a+"' class='btnEliminarDatosEspecificos' style='display:inline;'><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+a+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+a+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+a+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>";addRowDetallesActivosFijosPorArray("tableDetallesActivoFijoBajas",a,["",thClassName.codigoSecuencial,thClassName.tipoActivoFijo,thClassName.claseActivoFijo,thClassName.subClaseActivoFijo,thClassName.nombreActivoFijo,thClassName.marca,thClassName.modelo,thClassName.serie,thClassName.numeroChasis,thClassName.numeroMotor,thClassName.placa,thClassName.numeroClaveCatastral,thClassName.sucursal,thClassName.dependencia,thClassName.bodega,thClassName.empleado,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,thClassName.fechaAlta,thClassName.motivoAlta,thClassName.numeroFactura,""],[addRowCheckBox(a,e,"callBackFunctionSeleccionBaja",!1,"","",!1),$("#hhCodigoActivoFijo_"+o).val(),$("#hhIdTipoActivoFijo_"+o).val(),$("#hhIdClaseActivoFijo_"+o).val(),$("#hhIdSubclaseActivoFijo_"+o).val(),$("#hhNombreActivoFijo_"+o).val(),$("#hhMarca_"+o).val(),$("#hhModelo_"+o).val(),agregarDashValorEmpty($("#hhSerie_"+o).val()),agregarDashValorEmpty($("#hhNumeroChasis_"+o).val()),agregarDashValorEmpty($("#hhNumeroMotor_"+o).val()),agregarDashValorEmpty($("#hhPlaca_"+o).val()),agregarDashValorEmpty($("#hhNumeroClaveCatastral_"+o).val()),$("#hhSucursal_"+o).val(),agregarDashValorEmpty($("#hhDependencia_"+o).val()),agregarDashValorEmpty($("#hhBodega_"+o).val()),$("#hhEmpleado_"+o).val(),$("#hhProveedor_"+o).val(),$("#hhMotivoAlta_"+o).val(),$("#hhFechaRecepcion_"+o).val(),$("#hhOrdenCompra_"+o).val(),$("#hhFondoFinanciamiento_"+o).val(),agregarDashValorEmpty($("#hhFechaAlta_"+o).val()),agregarDashValorEmpty($("#hhNumeroFactura_"+o).val()),i+c],!0)}function callBackFunctionEliminarDatoEspecifico(a){deleteRowDetallesActivosFijos("tableDetallesActivoFijoBajas",a),eliminarRecepcionActivoFijoDetalleSeleccionado(a),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoRegistrar(a){var o=$(a).data("idfila"),e=$("#hhIdRecepcionActivoFijoDetalle_"+o).val();arrRecepcionActivoFijoDetalleTodos.push(e),callBackFunctionSeleccionConstatado(e,o,$("#chkConstatado_"+o).prop("checked")),deleteRowDetallesActivosFijos("tableDetallesDatosInventario",e),tryMarcarCheckBoxTodos()}function limpiarCampos(){$("#CodigoActivoFijo_Codigosecuencial").val(""),$("#CodigoActivoFijo_Codigosecuencial").focus()}function eventoGuardar(){$("#btn-guardar").on("click",function(a){var o=$("#checkout-form"),e=!0;if(0==arrRecepcionActivoFijoDetalleSeleccionado.length&&(mostrarNotificacion("Error","Tiene que existir al menos un Activo Fijo en el Inventario."),e=!1),o.valid()||(e=!1),e){for(var i=[],c=0;c<arrRecepcionActivoFijoDetalleSeleccionado.length;c++)i.push(arrRecepcionActivoFijoDetalleSeleccionado[c].idRecepcionActivoFijoDetalle+"_"+arrRecepcionActivoFijoDetalleSeleccionado[c].seleccionado);var t=i.join(",").toString();$("#idsRecepcionActivoFijoDetalleSeleccionado").val(t),$("#btn-guardar").prop("type","submit")}})}jQuery(document).ready(function(a){Init_DatetimePicker("FechaCorteInventario",!0),Init_DatetimePicker("FechaInforme",!0),Init_Select2(),adicionarArrRecepcionActivoFijoDetalle(),initDataTableFiltrado("tableDetallesActivoFijoBajas",[thClassName.bodega,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,thClassName.fechaAlta,thClassName.numeroFactura],function(){var a=$("#tableDetallesActivoFijoBajas").dataTable().api(),o=a.rows({page:"current"}).nodes(),e=null,i=[];crearGrupo(a,o,e,i,21,"Fondo de financiamiento",0,25),crearGrupo(a,o,e,i,3,"Clase de activo fijo",6,25),crearGrupo(a,o,e,i,4,"Subclase de activo fijo",12,25)},null,{mostrarTodos:!0}),eventoGuardar(),eventoLectorCodigoBarras(),inicializarIdsArrRecepcionActivoFijoDetalleTodos()});