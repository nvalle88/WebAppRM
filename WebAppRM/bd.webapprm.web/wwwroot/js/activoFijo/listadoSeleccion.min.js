var arrRecepcionActivoFijoDetalleSeleccionado=[],arrRecepcionActivoFijoDetalleTodos=[],objAdicional=[],mostrarNoSeleccionados=!1,isPrimeraSeleccion=!0,cantCheckSeleccionados=0,isComponentes=!1,funcionEvaluacionSeleccionarTodos=null;function inicializarDetallesActivoSeleccion(){$.each($(".hiddenIdRecepcionActivoFijoDetalle"),function(o,e){var c=$(e).val().toString().split(",");$.each(c,function(o,e){adicionarRecepcionActivoFijoDetalleSeleccionado(e,!0)})})}function inicializarIdsArrRecepcionActivoFijoDetalleTodos(){arrRecepcionActivoFijoDetalleTodos=[];var o=$("#hIdsRecepcionActivoFijoDetalleTodos").val();if(null!=o&&""!=o)for(var e=o.split(","),c=0;c<e.length;c++)arrRecepcionActivoFijoDetalleTodos.push(e[c])}function obtenerPosArrRecepcionActivoFijoDetalleTodos(o){for(var e=0;e<arrRecepcionActivoFijoDetalleTodos.length;e++)if(arrRecepcionActivoFijoDetalleTodos[e]==o)return e;return-1}function inicializarObjetoAdicional(){$.each(arrRecepcionActivoFijoDetalleSeleccionado,function(o,e){objAdicional.push({idRecepcionActivoFijoDetalle:e.idRecepcionActivoFijoDetalle,seleccionado:e.seleccionado})})}function adicionarRecepcionActivoFijoDetalleSeleccionado(o,e){arrRecepcionActivoFijoDetalleSeleccionado.push({idRecepcionActivoFijoDetalle:o,seleccionado:e})}function abrirVentanaDetallesActivoFijo(o){mostrarLoadingPanel("checkout-form","Cargando detalles, por favor espere...");for(var e=$("#btnDetallesActivoFijo_"+o),c=e.data("ids").toString().split(","),i=Array(),a=0;a<c.length;a++){var l=c[a].split("_");i.push({idRecepcionActivoFijoDetalle:parseInt(l[0]),seleccionado:"true"===l[1].toLowerCase()})}$.ajax({url:e.data("url"),method:"POST",data:{listadoRecepcionActivoFijoDetalleSeleccionado:i,arrConfiguraciones:arrConfiguraciones,mostrarNoSeleccionados:mostrarNoSeleccionados,objAdicional:o},success:function(o){Init_BootBox("Listado de Activos Fijos",o,"large",null)},complete:function(o){initDataTableFiltrado("tableDetallesActivoFijo",[]),tryMarcarCheckBoxTodos(),$("#tableDetallesActivoFijo_filter > label > span").prop("style","height:32px !important;"),ajustarBootboxPorCiento(80),$("#checkout-form").waitMe("hide")}})}function cargarListadoActivosFijosParaSeleccion(objeto,texto){mostrarLoadingPanel("checkout-form","Cargando listado, por favor espere..."),$.ajax({url:urlListadoActivosFijosSeleccionResult,method:"POST",data:{listadoRecepcionActivoFijoDetalleSeleccionado:arrRecepcionActivoFijoDetalleSeleccionado,objAdicional:objAdicional},success:function(data){texto||(texto="Activos Fijos"),Init_BootBox("Listado de "+texto,data,"large",null);try{var nombreFuncionCallback=$(objeto).data("funcioncallback");eval(nombreFuncionCallback+"()")}catch(o){}},error:function(o){mostrarNotificacion("Error","Ocurrió un error al cargar el formulario.")},complete:function(o){tryMarcarCheckBoxTodos(),$("#tableDetallesActivoFijoAltas_filter > label > span").prop("style","height:32px !important;"),$("#tableDetallesActivoFijoBajas_filter > label > span").prop("style","height:32px !important;"),$("#tableDetallesArticulos_filter > label > span").prop("style","height:32px !important;"),ajustarBootboxPorCiento(80),$("#checkout-form").waitMe("hide")}})}function obtenerRecepcionActivoFijoDetalleSeleccionado(o){for(var e=0;e<arrRecepcionActivoFijoDetalleSeleccionado.length;e++)if(arrRecepcionActivoFijoDetalleSeleccionado[e].idRecepcionActivoFijoDetalle==o)return arrRecepcionActivoFijoDetalleSeleccionado[e];return null}function obtenerListadoRecepcionActivoFijoDetalleSeleccionado(){for(var o=[],e=0;e<arrRecepcionActivoFijoDetalleSeleccionado.length;e++)arrRecepcionActivoFijoDetalleSeleccionado[e].seleccionado&&o.push(arrRecepcionActivoFijoDetalleSeleccionado[e]);return o}function eliminarRecepcionActivoFijoDetalleSeleccionado(o){for(var e=0;e<arrRecepcionActivoFijoDetalleSeleccionado.length;e++)if(arrRecepcionActivoFijoDetalleSeleccionado[e].idRecepcionActivoFijoDetalle==o)return void arrRecepcionActivoFijoDetalleSeleccionado.splice(e,1)}function eventoCheckboxDetallesActivoFijo(checkbox){var chk=$(checkbox),dataIsSeleccionTodos=chk.data("isselecciontodos");dataIsSeleccionTodos||(dataIsSeleccionTodos="false");var isSeleccionTodos="true"===dataIsSeleccionTodos.toLowerCase();if(isSeleccionTodos)callBackFunctionSeleccionTodos(chk);else{var seleccionado=chk.prop("checked"),idRecepcionActivoFijoDetalle=chk.data("idrecepcionactivofijodetalle");if(!isComponentes)try{if(idRecepcionActivoFijoDetalle){var rafdSeleccionado=obtenerRecepcionActivoFijoDetalleSeleccionado(idRecepcionActivoFijoDetalle);rafdSeleccionado.seleccionado=seleccionado}}catch(o){}try{cantCheckSeleccionados--;var nombreFuncionCallback=chk.data("funcioncallback");nombreFuncionCallback&&eval(nombreFuncionCallback+"("+idRecepcionActivoFijoDetalle+","+seleccionado+")")}catch(o){}isComponentes?(idRecepcionActivoFijoDetalle&&(seleccionado?cantComponentesSeleccionados++:cantComponentesSeleccionados--),tryMarcarCheckBoxTodosComponentes()):tryMarcarCheckBoxTodos()}}function callBackFunctionSeleccionTodos(o){if(o.prop("checked")){for(var e=[],c=0;c<arrRecepcionActivoFijoDetalleTodos.length;c++)if(isComponentes)existeIdComponente(arrRecepcionActivoFijoDetalleTodos[c])||e.push(arrRecepcionActivoFijoDetalleTodos[c]);else{var i=obtenerRecepcionActivoFijoDetalleSeleccionado(arrRecepcionActivoFijoDetalleTodos[c]);null!=i&&i.seleccionado||e.push(arrRecepcionActivoFijoDetalleTodos[c])}cantCheckSeleccionados=e.length;for(c=0;c<e.length;c++)$("#chkDetalleActivoFijo_"+e[c]).click(),isPrimeraSeleccion=!1}else for(c=0;c<arrRecepcionActivoFijoDetalleTodos.length;c++)$("#chkDetalleActivoFijo_"+arrRecepcionActivoFijoDetalleTodos[c]).click();isPrimeraSeleccion=!0}function tryMarcarCheckBoxTodos(){var o=!0;null==funcionEvaluacionSeleccionarTodos?o=obtenerListadoRecepcionActivoFijoDetalleSeleccionado().length==arrRecepcionActivoFijoDetalleTodos.length:o=funcionEvaluacionSeleccionarTodos();o?$("#chkDetalleActivoFijo_0").prop("checked","checked"):$("#chkDetalleActivoFijo_0").prop("checked","")}function obtenerArrColumnasVisible(o){for(var e=$("#"+o).DataTable(),c=$("#"+o).dataTable().fnSettings().aoColumns.length,i=[],a=0;a<c;a++)i.push(a);return e.columns(i).visible()}function mostrarOcultarColumnas(o,e){for(var c=$("#"+o).dataTable(),i=0;i<e.length;i++)c.fnSetColumnVis(i,e[i])}function ocultarColumnasPorArray(o,e){for(var c=$("#"+o).dataTable(),i=0;i<e.length;i++)0==e[i]&&c.fnSetColumnVis(i,!1)}function mostrarOcultarColumnasPorArray(o,e){for(var c=$("#"+o).DataTable(),i=$("#"+o).dataTable().fnSettings().aoColumns.length,a=0;a<i;a++)c.column(a).visible(e)}function obtenerArrValores(o,e,c,i){for(var a=[],l=0;l<c.length;l++)l==c.length-1&&i?a.push(c[l]):a.push($("#"+o+e+c[l]).html());return a}function addRowDetallesActivosFijos(o,e,c,i,a){isPrimeraSeleccion&&(arrColumnasVisibleTableACopiar=obtenerArrColumnasVisible(o),arrColumnasVisibleTableACopiando=obtenerArrColumnasVisible(e),mostrarOcultarColumnasPorArray(o,!0),mostrarOcultarColumnasPorArray(e,!0)),addRowDetallesActivosFijosPorArray(o,c,i,obtenerArrValores(e,c,i,a),a),cantCheckSeleccionados<=0&&(ocultarColumnasPorArray(o,arrColumnasVisibleTableACopiar),ocultarColumnasPorArray(e,arrColumnasVisibleTableACopiando),cantCheckSeleccionados=0,arrColumnasVisibleTableACopiar=[],arrColumnasVisibleTableACopiando=[])}function addRowDetallesActivosFijosPorArray(c,i,a,o,l){var e=$("#"+c).DataTable().row.add(o).draw().node(),t=$(e).children();$(e).prop("id",c+i),$.each(t,function(o,e){o==t.length-1&&l||$(e).prop("id",c+i+a[o])})}function deleteRowDetallesActivosFijos(o,e){var c=$("#"+o+e);$("#"+o).dataTable().fnDeleteRow(c)}function addRowCheckBox(o,e,c,i,a,l,t){return'<div class="checkbox"><label><input class="checkbox style-0 chkDetallesActivoFijo"'+(e?'checked="checked"':"")+' type="checkbox" onchange="eventoCheckboxDetallesActivoFijo(this)" data-funcioncallback="'+c+'" data-functioncallbackselectiontodos="'+a+'" data-functioncallbackremovetodos="'+l+'" data-isselecciontodos="'+t+'" data-idrecepcionactivofijodetalle="'+o+'" id= "chkDetalleActivoFijo_'+o+'"'+(i?'disabled="disabled"':"")+"><span>&nbsp;</span></label ></div>"}function agregarDashValorEmpty(o){return""!=o&&null!=o||(o="-"),o}jQuery(document).ready(function(o){initDataTableFiltrado("tableActivosFijos",[])});