function eventoMotivoAlta(){$("#IdMotivoAlta").on("change",function(a){partialViewFacturaActivoFijoIsCompra()})}function partialViewFacturaActivoFijoIsCompra(){var a=$("#IdMotivoAlta option:selected").text();a&&""!=a&&null!=a&&-1!=a.toLowerCase().indexOf("compra")?(mostrarLoadingPanel("checkout-form","Cargando detalles de factura..."),$.ajax({url:urlDetalleFacturaAltaActivos,method:"POST",data:{idFacturaActivoFijo:$("#IdFacturaActivoFijo").val()},success:function(a){$("#divOpcionCompra").html(a),Init_DatetimePicker("FacturaActivoFijo_FechaFactura",!0),Init_FileInput("fileFactura")},complete:function(a){$("#checkout-form").waitMe("hide")}})):$("#divOpcionCompra").html("")}function callBackFunctionEliminarDatoEspecifico(a){deleteRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados",a),eliminarRecepcionActivoFijoDetalleSeleccionado(a),eliminarComponente(a)}function callBackInicializarTableListadoSeleccion(){initDataTableFiltrado("tableDetallesActivoFijoAltas",[thClassName.bodega,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento])}function callBackFunctionSeleccionAlta(a,e){var o=$("#hComunesComponentes_"+a).val();if(e){adicionarRecepcionActivoFijoDetalleSeleccionado(a,!0),addComponenteToArray(a,a,o.split(","));var i=$("#tableDetallesActivoFijoAltas"+a+"Sucursal").data("idsucursal"),t='<input type="hidden" id="hComponentes_'+a+'" name="hComponentes_'+a+'" value="'+o+'" />',l='<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+a+'" name="hIdRecepcionActivoFijoDetalle_'+a+'" value="'+a+'" />',c='<input type="hidden" class="hiddenHEmpleado" id="hEmpleado_'+a+'" name="hEmpleado_'+a+'" value="'+$("#tableDetallesActivoFijoAltas"+a+"Empleado").data("idempleado")+'" />',s='<input type="hidden" id="hSucursal_'+a+'" name="hSucursal_'+a+'" value="'+i+'" />',n='<input type="hidden" id="hUbicacion_'+a+'" name="hUbicacion_'+a+'" value="0" />',d='<a href="javascript:void(0);" onclick="cargarFormularioDatosEmpleado('+a+')" class="btnDatosEmpleado" data-idfila="'+a+'">Custodio</a>',r='<span> | </span><a href="javascript:void(0);" onclick="cargarFormularioComponentesDatosEspecificos('+a+')" class="btnComponentesDatosEspecificos" data-idfila="'+a+'" data-idorigen="'+a+'">Componentes</a>',m="<div id='divEliminarDatosEspecificos_"+a+"' class='btnEliminarDatosEspecificos' style='display:inline;'><span> | </span><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+a+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+a+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+a+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>";addRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados","tableDetallesActivoFijoAltas",a,[thClassName.codigoSecuencial,thClassName.tipoActivoFijo,thClassName.claseActivoFijo,thClassName.subClaseActivoFijo,thClassName.nombreActivoFijo,thClassName.marca,thClassName.modelo,thClassName.serie,thClassName.numeroChasis,thClassName.numeroMotor,thClassName.placa,thClassName.numeroClaveCatastral,thClassName.sucursal,thClassName.dependencia,thClassName.bodega,thClassName.empleado,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento,t+l+c+s+n+d+r+m],!0)}else callBackFunctionEliminarDatoEspecifico(a)}function cargarFormularioDatosEmpleado(a){var e=$("#hSucursal_"+a).val(),o=$("#hEmpleado_"+a).val();mostrarLoadingPanel("checkout-form","Cargando listados de custodios por sucursal..."),$.ajax({url:urlModalEmpleadosResult,method:"POST",data:{idSucursal:e,idEmpleado:o,idRecepcionActivoFijoDetalle:a},success:function(a){Init_BootBox("Selecci&oacute;n de Custodio",a,null,null,{isGuardar:!0,hideAlGuardar:!1,callbackGuardar:function(){guardarDatosEmpleado()}})},complete:function(a){Init_Select2(),$("#chkTodosEmpleadosDatosEspecificos").prop("checked",""),$("#checkout-form").waitMe("hide")}})}function guardarDatosEmpleado(){mostrarLoadingPanel("divEmpleadoModal","Validando datos, por favor espere...");var t=$("#IdEmpleado").val();if(""!=t&&null!=t){var a=$("#hIdRecepcionActivoFijoDetalleEmpleado").val(),l=$("#hSucursal_"+a).val();if($("#chkTodosEmpleadosDatosEspecificos").prop("checked")){var e=$(".hiddenIdRecepcionActivoFijoDetalle");$.each(e,function(a,e){var o=$(e).val(),i=$("#hSucursal_"+o).val();l==i&&putDatoEmpleadoTable(o,t)})}else putDatoEmpleadoTable(a,t);closeBootBox()}else $("#valIdEmpleado").html("Tiene que seleccionar un Custodio.");$("#divEmpleadoModal").waitMe("hide")}function putDatoEmpleadoTable(a,e){$("#hEmpleado_"+a).val(e),$("#tableDetallesActivoFijoSeleccionados"+a+"Empleado").html($("#IdEmpleado option:selected").text())}function validarDatosEspecificosPertenecenEmpleado(){var a=$(".hiddenHEmpleado"),i=!0;return $.each(a,function(a,e){var o=$(e).val();""!=o.toString()&&null!=o||(i=!1)}),i}function eventoGuardar(){$("#btn-guardar").on("click",function(a){var e=$("#tableDetallesActivoFijoSeleccionados").dataTable().api(),o=$("#checkout-form"),i=!0;0==e.rows().nodes().length&&(mostrarNotificacion("Error","Tiene que seleccionar al menos un Activo Fijo."),i=!1),validarDatosEspecificosPertenecenEmpleado()||(mostrarNotificacion("Error","Tiene que seleccionar el Custodio para todos los Activos Fijos seleccionados."),i=!1),o.valid()||(i=!1),i&&$("#btn-guardar").prop("type","submit")})}$(document).ready(function(){Init_Select2(),Init_DatetimePicker("FacturaActivoFijo_FechaFactura",!0),Init_DatetimePicker("FechaAlta",!0),Init_DatetimePicker("FechaPago"),eventoMotivoAlta(),inicializarDetallesActivoSeleccion(),inicializarObjetoAdicional(),initDataTableFiltrado("tableDetallesActivoFijoSeleccionados",[thClassName.bodega,thClassName.proveedor,thClassName.motivoAlta,thClassName.fechaRecepcion,thClassName.ordenCompra,thClassName.fondoFinanciamiento]),Init_FileInput("file"),Init_FileInput("fileFactura"),eventoGuardar(),partialViewFacturaActivoFijoIsCompra(),$("#tableDetallesActivoFijoSeleccionados").DataTable().page.len(-1).draw(),isVistaDetalles&&($("#IdMotivoAlta").prop("disabled","disabled"),$("#FechaAlta").prop("disabled","disabled"),$("#FechaPago").prop("disabled","disabled"),$("#IdTipoUtilizacionAlta").prop("disabled","disabled"),$("#FacturaActivoFijo_NumeroFactura").prop("disabled","disabled"),$("#FacturaActivoFijo_FechaFactura").prop("disabled","disabled"))});