function eventoMotivoAlta(){$("#IdMotivoAlta").on("change",function(a){partialViewFacturaActivoFijoIsCompra()})}function partialViewFacturaActivoFijoIsCompra(){var a=$("#IdMotivoAlta option:selected").text();a&&""!=a&&null!=a&&-1!=a.toLowerCase().indexOf("compra")?(mostrarLoadingPanel("checkout-form","Cargando detalles de factura..."),$.ajax({url:urlDetalleFacturaAltaActivos,method:"POST",data:{idFacturaActivoFijo:$("#IdFacturaActivoFijo").val()},success:function(a){$("#divOpcionCompra").html(a),Init_DatetimePicker("FacturaActivoFijo_FechaFactura",!0),Init_FileInput("fileFactura")},complete:function(a){$("#checkout-form").waitMe("hide")}})):$("#divOpcionCompra").html("")}function callBackFunctionEliminarDatoEspecifico(a){deleteRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados",a),eliminarRecepcionActivoFijoDetalleSeleccionado(a),eliminarComponente(a)}function callBackInicializarTableListadoSeleccion(){initDataTableFiltrado("tableDetallesActivoFijoAltas",[14,16,17,18,19,20])}function callBackFunctionSeleccionAlta(a,o){var e=$("#hComunesComponentes_"+a).val();if(o){adicionarRecepcionActivoFijoDetalleSeleccionado(a,!0),addComponenteToArray(a,a,e.split(","));var i=$("#tableDetallesActivoFijoAltas"+a+"Sucursal").data("idsucursal"),t=$("#tableDetallesActivoFijoAltas"+a+"Empleado").data("idempleado");addRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados","tableDetallesActivoFijoAltas",a,["Codigosecuencial","TipoActivoFijo","ClaseActivoFijo","SubclaseActivoFijo","NombreActivoFijo","Marca","Modelo","Serie","NumeroChasis","NumeroMotor","Placa","NumeroClaveCatastral","Sucursal","Bodega","Empleado","Proveedor","MotivoAlta","FechaRecepcion","OrdenCompra","FondoFinanciamiento",'<input type="hidden" id="hComponentes_'+a+'" name="hComponentes_'+a+'" value="'+e+'" />'+('<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+a+'" name="hIdRecepcionActivoFijoDetalle_'+a+'" value="'+a+'" />')+('<input type="hidden" class="hiddenHEmpleado" id="hEmpleado_'+a+'" name="hEmpleado_'+a+'" value="'+t+'" />')+('<input type="hidden" id="hSucursal_'+a+'" name="hSucursal_'+a+'" value="'+i+'" />')+('<input type="hidden" id="hUbicacion_'+a+'" name="hUbicacion_'+a+'" value="0" />')+('<a href="javascript:void(0);" onclick="cargarFormularioDatosEmpleado('+a+')" class="btnDatosEmpleado" data-idfila="'+a+'">Custodio</a>')+('<span> | </span><a href="javascript:void(0);" onclick="cargarFormularioComponentesDatosEspecificos('+a+')" class="btnComponentesDatosEspecificos" data-idfila="'+a+'" data-idorigen="'+a+'">Componentes</a>')+("<div id='divEliminarDatosEspecificos_"+a+"' class='btnEliminarDatosEspecificos' style='display:inline;'><span> | </span><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+a+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+a+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+a+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>")],!0)}else callBackFunctionEliminarDatoEspecifico(a)}function cargarFormularioDatosEmpleado(a){var o=$("#hSucursal_"+a).val(),e=$("#hEmpleado_"+a).val();mostrarLoadingPanel("checkout-form","Cargando listados de custodios por sucursal..."),$.ajax({url:urlModalEmpleadosResult,method:"POST",data:{idSucursal:o,idEmpleado:e,idRecepcionActivoFijoDetalle:a},success:function(a){Init_BootBox("Selecci&oacute;n de Custodio",a,null,null,{isGuardar:!0,hideAlGuardar:!1,callbackGuardar:function(){guardarDatosEmpleado()}})},complete:function(a){Init_Select2(),$("#chkTodosEmpleadosDatosEspecificos").prop("checked",""),$("#checkout-form").waitMe("hide")}})}function guardarDatosEmpleado(){mostrarLoadingPanel("divEmpleadoModal","Validando datos, por favor espere...");var t=$("#IdEmpleado").val();if(""!=t&&null!=t){var a=$("#hIdRecepcionActivoFijoDetalleEmpleado").val(),l=$("#hSucursal_"+a).val();if($("#chkTodosEmpleadosDatosEspecificos").prop("checked")){var o=$(".hiddenIdRecepcionActivoFijoDetalle");$.each(o,function(a,o){var e=$(o).val(),i=$("#hSucursal_"+e).val();l==i&&putDatoEmpleadoTable(e,t)})}else putDatoEmpleadoTable(a,t);closeBootBox()}else $("#valIdEmpleado").html("Tiene que seleccionar un Custodio.");$("#divEmpleadoModal").waitMe("hide")}function putDatoEmpleadoTable(a,o){$("#hEmpleado_"+a).val(o),$("#tableDetallesActivoFijoSeleccionados"+a+"Empleado").html($("#IdEmpleado option:selected").text())}function validarDatosEspecificosPertenecenEmpleado(){var a=$(".hiddenHEmpleado"),i=!0;return $.each(a,function(a,o){var e=$(o).val();""!=e.toString()&&null!=e||(i=!1)}),i}function eventoGuardar(){$("#btn-guardar").on("click",function(a){var o=$("#tableDetallesActivoFijoSeleccionados").dataTable().api(),e=$("#checkout-form"),i=!0;0==o.rows().nodes().length&&(mostrarNotificacion("Error","Tiene que seleccionar al menos un Activo Fijo."),i=!1),validarDatosEspecificosPertenecenEmpleado()||(mostrarNotificacion("Error","Tiene que seleccionar el Custodio para todos los Activos Fijos seleccionados."),i=!1),e.valid()||(i=!1),i&&$("#btn-guardar").prop("type","submit")})}$(document).ready(function(){Init_Select2(),Init_DatetimePicker("FacturaActivoFijo_FechaFactura",!0),Init_DatetimePicker("FechaAlta",!0),eventoMotivoAlta(),inicializarDetallesActivoSeleccion(),inicializarObjetoAdicional(),initDataTableFiltrado("tableDetallesActivoFijoSeleccionados",[13,15,16,17,18,19]),Init_FileInput("file"),Init_FileInput("fileFactura"),eventoGuardar(),partialViewFacturaActivoFijoIsCompra(),$("#tableDetallesActivoFijoSeleccionados").DataTable().page.len(-1).draw(),isVistaDetalles&&($("#IdMotivoAlta").prop("disabled","disabled"),$("#FechaAlta").prop("disabled","disabled"),$("#IdTipoUtilizacionAlta").prop("disabled","disabled"),$("#FacturaActivoFijo_NumeroFactura").prop("disabled","disabled"),$("#FacturaActivoFijo_FechaFactura").prop("disabled","disabled"))});